<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>플레이 기록 목록</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/custom.css}">
</head>

<body class="bg-background text-foreground">
<!-- ✅ 공통 대시보드 헤더 -->
<div th:replace="fragments/dashboardHeader :: dashboard-header('records')"></div>

<main class="container py-5">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold mb-0">🔒 등록된 플레이 기록</h2>
        <!-- ✅ URL: /playRecords/new 로 통일 -->
        <a th:href="@{/playRecords/new}" class="btn btn-primary">＋ 새 플레이 기록</a>
    </div>

    <table class="table table-hover align-middle shadow-sm bg-card">
        <thead class="table-light">
        <tr>
            <th>번호</th>
            <th>플레이 날짜</th>
            <th>테마</th>
            <th>매장</th>
            <th>결과</th>
            <th>클리어 시간</th>
            <th>힌트</th>
            <th>평점</th>
            <th>한줄평</th>
        </tr>
        </thead>
        <tbody>
        <!-- playRecords : List<PlayRecord> -->
        <tr th:each="record, iterStat : ${playRecords}">
            <td th:text="${iterStat.count}">1</td>
            <td th:text="${#temporals.format(record.playDate, 'yyyy-MM-dd')}">2025-11-13</td>
            <td th:text="${record.theme.title}">사라진 연구소의 비밀</td>
            <td th:text="${record.theme.venue.name}">홍대 이스케이프 룸</td>
            <td th:text="${record.cleared} ? '성공' : '실패'">성공</td>
            <!-- 성공일 때만 시간 표시, 실패면 '-' -->
            <td th:text="${record.cleared} ? ${record.clearTimeSec} + '초' : '-'">3600초</td>
            <td th:text="${record.hintCount + '개'}">2개</td>
            <td th:text="${record.rating + '점'}">4점</td>
            <td th:text="${record.comment}">오늘 컨디션이 좋았다!</td>
        </tr>

        <!-- 목록이 비어 있을 때 -->
        <tr th:if="${#lists.isEmpty(playRecords)}">
            <td colspan="9" class="text-center text-muted py-4">등록된 플레이 기록이 없습니다.</td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{/dashboard}" class="btn btn-outline-secondary mt-3">대시보드로 돌아가기</a>
</main>
</body>
</html>
